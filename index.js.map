{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const creatGalleryCard = galleryInfo => {\n    return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${galleryInfo.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${galleryInfo.webformatURL}\"\n      data-source=\"${galleryInfo.largeImageURL}\"\n      alt=\"${galleryInfo.tags}\"\n    />\n  </a>\n  <div class=\"div-info\">\n      <div class=\"info-gallery\">\n        <h2 class=\"info-title\">Likes</h2>\n        <p class=\"info-st\">${galleryInfo.likes}</p>\n      </div>\n      <div class=\"info-gallery\">\n        <h2 class=\"info-title\">Views</h2>\n        <p class=\"info-st\">${galleryInfo.views}</p>\n      </div>\n      <div class=\"info-gallery\">\n        <h2 class=\"info-title\">Comments</h2>\n        <p class=\"info-st\">${galleryInfo.comments}</p>\n      </div>\n      <div class=\"info-gallery\">\n        <h2 class=\"info-title\">Downloads</h2>\n        <p class=\"info-st\">${galleryInfo.downloads}</p>\n      </div>\n    </div>\n</li>`\n}","import axios from 'axios';\n\nconst refs = {\n  loaderEl: document.querySelector('.loader'),\n};\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\naxios.interceptors.response.use(\n  function (response) {\n    refs.loaderEl.classList.remove('active')\n    return response;\n  },\n  function (error) {\n    refs.loaderEl.classList.remove('active')\n    return Promise.reject(error);\n  }\n);\n\nexport const photoApi = (searchedQuery, currentPage) => {\n  const requstParams = {\n    key: '50834675-61314f789662a68656002458b',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n  return axios.get(`/api/`, { params: requstParams });\n};\n","import { creatGalleryCard } from './js/render-functions';\nimport { photoApi } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreEl: document.querySelector('.load-more-btn'),\n};\n\nconst galleryLightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet searchedQuery = '';\n\nconst toSearchSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    const { target: searchForm } = event;\n\n    searchedQuery = searchForm.elements.user_query.value;\n\n    if (searchedQuery === '') {\n      iziToast.error({\n        title: '',\n        message: 'The field is empty.<br>Please enter something to continue.',\n        position: 'topRight',\n      });\n      refs.galleryEl.innerHTML = '';\n      return;\n    }\n\n    refs.loaderEl.classList.add('active');\n\n    refs.loadMoreEl.classList.add('is-hiden');\n\n    currentPage = 1;\n\n    const { data } = await photoApi(searchedQuery, currentPage);\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching<br>your search query. Please try again!',\n        position: 'topRight',\n      });\n      refs.galleryEl.innerHTML = '';\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      refs.loadMoreEl.classList.remove('is-hiden');\n      refs.loadMoreEl.addEventListener('click', loadMoreBtn);\n    }\n\n    const galleryCreat = data.hits\n      .map(pictureInfo => creatGalleryCard(pictureInfo))\n      .join('');\n\n    refs.galleryEl.innerHTML = galleryCreat;\n\n    galleryLightBox.refresh();\n\n    searchForm.reset();\n  } catch (error) {\n    console.log('Fetch error:', error);\n  }\n};\n\nconst loadMoreBtn = async event => {\n  try {\n    currentPage++;\n\n    const { data } = await photoApi(searchedQuery, currentPage);\n\n    const galleryCreat = data.hits\n      .map(pictureInfo => creatGalleryCard(pictureInfo))\n      .join('');\n\n    refs.galleryEl.insertAdjacentHTML('beforeend', galleryCreat);\n\n    if (data.hits.length < 15) {\n      refs.loadMoreEl.classList.add('is-hiden');\n      iziToast.info({\n        title: '',\n        message:\n          \"We're sorry, but you've reached<br>the end of search results.\",\n        position: 'topRight',\n      });\n      refs.loadMoreEl.removeEventListener('click', loadMoreBtn);\n    }\n\n    const firstCard = document.querySelector('.gallery-item');\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log('Fetch error:', error);\n  }\n};\n\nrefs.formEl.addEventListener('submit', toSearchSubmit);\n"],"names":["creatGalleryCard","galleryInfo","refs","axios","response","error","photoApi","searchedQuery","currentPage","requstParams","galleryLightBox","SimpleLightbox","toSearchSubmit","event","searchForm","iziToast","data","loadMoreBtn","galleryCreat","pictureInfo","cardHeight"],"mappings":"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"}